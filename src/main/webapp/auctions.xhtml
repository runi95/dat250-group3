<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:body>
    <ui:composition template="./master.xhtml">
        <ui:define name="content">
            <div class="parent">
                <div class="child">

                    <br/>

                    <h:form>
                        <h:commandButton action="#{loginView.logout}" value="Log out" />
                    </h:form>

                    <br/>

                    <h2>
                        Welcome to the auction page!
                    </h2>
                    <h:link value="Create New Auction" outcome="newauction" styleClass="btn btn-primary" />
                    <ui:repeat var="a" value="#{auctionView.openAuctions}">
                        <h3><h:form> Product: <h:commandLink action="#{auctionView.chooseAuction(a.id)}" value="#{a.product.name}" /></h:form></h3>
                        <img src="data:image/png;base64, #{a.product.pictureAsBase64}"/>
                        <div>
                            <small>#{a.seller.name} #{a.seller.lastName}, <a
                                    href="mailto:#{a.seller.email}?Subject=#{a.product.name}"
                                    target="_top">mail</a></small>
                        </div>
                        <div>
                            Current Bid: #{a.highestBid.amount} #{a.highestBid.user.name} #{a.highestBid.user.lastName}
                        </div>

                        <br/><br/><br/>

                    </ui:repeat>
                </div>
            </div>

        </ui:define>
    </ui:composition>
</h:body>
</html>